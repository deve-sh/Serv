#!/usr/bin/env node
"use strict"; function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }var _express = require('express'); var _express2 = _interopRequireDefault(_express);var _getport = require('get-port'); var _getport2 = _interopRequireDefault(_getport);var n;async function c(){let o=process.argv[2];if(!o)throw new Error("Please specify a directory. I.E: npx serve ./build");n=await _getport2.default.call(void 0, {port:3e3});let e=_express2.default.call(void 0, );e.use(_express2.default.static(o));let s=e.listen(n,()=>{console.log("Static server running on port:",n),console.log("Press Ctrl/Cmd + C twice to stop the server and free port")});return async()=>{s.close()}}c().then(o=>{process.on("exit",async e=>{console.log("Process exited with code:",e),await o(),process.exit(e)}),process.on("SIGTERM",async()=>{await o(),console.log("Serve process received a SIGTERM signal"),process.exit(0)}),process.on("SIGINT",async()=>{await o(),console.log("Serve process has been interrupted"),process.exit(0)}),process.on("uncaughtException",async e=>{console.log(`Uncaught Exception: ${e.message}`),await o(),process.exit(1)}),process.on("unhandledRejection",async(e,s)=>{console.log("Unhandled rejection at ",s,`reason: ${e}`),await o(),process.exit(1)})});
